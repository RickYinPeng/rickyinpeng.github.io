<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="宜立方商城项目," />










<meta name="description" content="一.课程计划12345671、solr集群搭建2、使用solrj管理solr集群3、把搜索功能切换到集群版4、添加商品同步到索引库    a: Activemq    b:发送消息    c:接受消息 二.什么是SolrCloud？SolrCloud(solr 云)是Solr提供的分布式搜索方案，当你需要大规模，容错，分布式索引和检索能力时使用 SolrCloud。当一个系统的索引数据量少的时候是">
<meta name="keywords" content="宜立方商城项目">
<meta property="og:type" content="article">
<meta property="og:title" content="八.宜立方商城——Solr集群和商品信息同步">
<meta property="og:url" content="http://yoursite.com/2019/07/05/8.宜立方商城——Solr集群和商品信息同步/index.html">
<meta property="og:site_name" content="RickYinPeng&#39;s blog">
<meta property="og:description" content="一.课程计划12345671、solr集群搭建2、使用solrj管理solr集群3、把搜索功能切换到集群版4、添加商品同步到索引库    a: Activemq    b:发送消息    c:接受消息 二.什么是SolrCloud？SolrCloud(solr 云)是Solr提供的分布式搜索方案，当你需要大规模，容错，分布式索引和检索能力时使用 SolrCloud。当一个系统的索引数据量少的时候是">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/1_131875046546250000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/2_131875046549531250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/3_131875142752812500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/4_131875142755625000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/5_131875142764843750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/6_131875142769687500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/7_131875142773593750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/8_131875142777031250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/9_131875142784375000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/10_131875142789218750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/11_131875142795156250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/12_131875142799531250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/13_131875142802343750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/14_131875142805468750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/15_131875142808750000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/16_131875142812031250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/17_131875142815781250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/18_131875142818125000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/19_131875142824843750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/20_131875142829375000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/21_131875142832812500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/1_131875962197656250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/2_131875962205937500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/3_131875962208750000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/4_131875962211562500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/5_131875962215312500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/6_131875962219062500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/7_131875962221875000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/8_131875962225156250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/9_131875962227812500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/10_131875962231093750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/11_131875962233906250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/12_131875962236718750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/13_131875962239843750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/14_131875962242187500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/15_131875962245312500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/16_131875962248125000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/17_131875962252187500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/18_131875962255156250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/19_131875962257968750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/20_131875962261093750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/21_131875962263437500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/22_131875962265937500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/23_131875962268437500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/24_131875962272812500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/25_131875962275156250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/26_131875962278750000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/27_131875962282656250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/28_131875962285468750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/29_131875962288593750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/30_131875962291250000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/31_131875962294375000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/32_131875962296875000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/33_131875962298906250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/34_131875962303906250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/35_131875962306562500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/36_131875962308437500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/37.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/38.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/39.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/40.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/41.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/42.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/1_131877006803593750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/2_131877006807968750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/3_131877006815312500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/4_131877006818125000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/5_131877006822031250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/6_131877006825156250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/1_131877136924218750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/2_131877136933437500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/3_131877136940000000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/4_131877177777187500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/5_131877177784375000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/6_131877177794218750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/7_131877177803437500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/11_131877862087656250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/1_131877861982812500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/2_131877861998750000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/3_131877862010625000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/4_131877862022812500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/5_131877862030625000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/6_131877862040156250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/7_131877862051875000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/8_131877862066718750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/9_131877862072968750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/10_131877862078593750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/24_131878004931718750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/12_131878004171250000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/13_131878004175625000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/14_131878004179843750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/15_131878004185468750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/16_131878004188906250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/17_131878004195781250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/18_131878004200156250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/19_131878004207968750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/20_131878004212343750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/21_131878004217968750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/22_131878004224687500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/23_131878004230625000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/24_131878004931718750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/25_131878023982968750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/26_131878023986250000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/27_131878023988906250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/28_131878023991875000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/29_131878023994687500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/30_131878023997031250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/31_131878023999687500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/1_131878467847031250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/2_131878473855625000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/3_131878473892343750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/4_131878473943281250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/5_131878498220000000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/6_131878498228281250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/7_131878498247968750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/21_131878641926406250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/8_131878641861250000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/9_131878641867656250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/10_131878641874062500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/11_131878641880000000.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/12_131878641886406250.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/13_131878641891093750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/14_131878641895937500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/15_131878641900937500.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/165.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/17_131878641906093750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/18_131878641911093750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/19_131878641915468750.png">
<meta property="og:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/20_131878641921093750.png">
<meta property="og:updated_time" content="2018-11-28T07:43:46.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="八.宜立方商城——Solr集群和商品信息同步">
<meta name="twitter:description" content="一.课程计划12345671、solr集群搭建2、使用solrj管理solr集群3、把搜索功能切换到集群版4、添加商品同步到索引库    a: Activemq    b:发送消息    c:接受消息 二.什么是SolrCloud？SolrCloud(solr 云)是Solr提供的分布式搜索方案，当你需要大规模，容错，分布式索引和检索能力时使用 SolrCloud。当一个系统的索引数据量少的时候是">
<meta name="twitter:image" content="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/1_131875046546250000.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"hide","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/07/05/8.宜立方商城——Solr集群和商品信息同步/"/>





  <title>八.宜立方商城——Solr集群和商品信息同步 | RickYinPeng's blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
	<a href="https://github.com/RickYinPeng"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">RickYinPeng's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-search">
          <a href="/search" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            搜索
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/05/8.宜立方商城——Solr集群和商品信息同步/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RickYinPeng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/We.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RickYinPeng's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">八.宜立方商城——Solr集群和商品信息同步</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-05T08:25:32+08:00">
                2019-07-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="一-课程计划"><a href="#一-课程计划" class="headerlink" title="一.课程计划"></a>一.课程计划</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1、solr集群搭建</span><br><span class="line">2、使用solrj管理solr集群</span><br><span class="line">3、把搜索功能切换到集群版</span><br><span class="line">4、添加商品同步到索引库</span><br><span class="line">    a: Activemq</span><br><span class="line">    b:发送消息</span><br><span class="line">    c:接受消息</span><br></pre></td></tr></table></figure>
<h2 id="二-什么是SolrCloud？"><a href="#二-什么是SolrCloud？" class="headerlink" title="二.什么是SolrCloud？"></a>二.什么是SolrCloud？</h2><p>SolrCloud(solr 云)是Solr提供的分布式搜索方案，当你需要大规模，容错，分布式索引和检索能力时使用 SolrCloud。当一个系统的索引数据量少的时候是不需要使用SolrCloud的，当索引量很大，搜索请求并发很高，这时需要使用SolrCloud来满足这些需求。</p>
<p>SolrCloud是基于Solr和Zookeeper的分布式搜索方案，它的主要思想是使用Zookeeper作为集群的配置信息中心。</p>
<p>它有几个特色功能：</p>
<ol>
<li>集中式的配置信息</li>
<li>自动容错</li>
<li>近实时搜索</li>
<li>查询时自动负载均衡</li>
</ol>
<h2 id="三-Solr集群的系统架构"><a href="#三-Solr集群的系统架构" class="headerlink" title="三.Solr集群的系统架构"></a>三.Solr集群的系统架构</h2><p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/1_131875046546250000.png" alt="image"></p>
<h3 id="3-1物理结构"><a href="#3-1物理结构" class="headerlink" title="3.1物理结构"></a>3.1物理结构</h3><p>三个Solr实例（ 每个实例包括两个Core），组成一个SolrCloud。</p>
<h3 id="3-2逻辑结构"><a href="#3-2逻辑结构" class="headerlink" title="3.2逻辑结构"></a>3.2逻辑结构</h3><p>索引集合包括两个Shard（shard1和shard2），shard1和shard2分别由三个Core组成，其中一个Leader两个Replication，Leader是由zookeeper选举产生，zookeeper控制每个shard上三个Core的索引数据一致，解决高可用问题。</p>
<p>用户发起索引请求分别从shard1和shard2上获取，解决高并发问题。</p>
<h4 id="3-2-1-collection"><a href="#3-2-1-collection" class="headerlink" title="3.2.1 collection"></a>3.2.1 collection</h4><p>Collection在SolrCloud集群中是一个逻辑意义上的完整的索引结构。它常常被划分为一个或多个Shard（分片），它们使用相同的配置信息。<br><br>比如：针对商品信息搜索可以创建一个collection。<br> collection=shard1+shard2+….+shardX</p>
<h4 id="3-2-2-Core"><a href="#3-2-2-Core" class="headerlink" title="3.2.2 Core"></a>3.2.2 Core</h4><p>每个Core是Solr中一个独立运行单位，提供 索引和搜索服务。一个shard需要由一个Core或多个Core组成。由于collection由多个shard组成所以collection一般由多个core组成。</p>
<h4 id="3-2-3-Master或Slave"><a href="#3-2-3-Master或Slave" class="headerlink" title="3.2.3 Master或Slave"></a>3.2.3 Master或Slave</h4><p>Master是master-slave结构中的主结点（通常说主服务器），Slave是master-slave结构中的从结点（通常说从服务器或备服务器）。同一个Shard下master和slave存储的数据是一致的，这是为了达到高可用目的。</p>
<h4 id="3-2-4-Shard"><a href="#3-2-4-Shard" class="headerlink" title="3.2.4 Shard"></a>3.2.4 Shard</h4><p>Collection的逻辑分片。每个Shard被化成一个或者多个replication，通过选举确定哪个是Leader。</p>
<h3 id="3-3-需要实现的solr集群架构"><a href="#3-3-需要实现的solr集群架构" class="headerlink" title="3.3 需要实现的solr集群架构"></a>3.3 需要实现的solr集群架构</h3><p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/2_131875046549531250.png" alt="image"></p>
<p><strong><font size="3">Zookeeper作为集群的管理工具</font></strong>。<br></p>
<font size="3"><br>1、集群管理：容错、负载均衡。<br><br>2、配置文件的集中管理<br><br>3、集群的入口<br><br>需要实现zookeeper 高可用。需要搭建集群。建议是奇数节点。需要三个zookeeper服务器。(<font color="red">因为zookeeper也有一个投票选举的机制，超过半数以上才能算好，跟redis集群不同，redis那叫容错</font>)<br></font>

<p>搭建solr集群需要7台服务器。</p>
<p>搭建伪分布式：<br>需要三个zookeeper节点<br>需要四个tomcat节点。</p>
<p>建议虚拟机的内容1G以上。</p>
<h2 id="四-环境准备"><a href="#四-环境准备" class="headerlink" title="四.环境准备"></a>四.环境准备</h2><p>CentOS-6.5-i386-bin-DVD1.iso</p>
<p>jdk-7u72-linux-i586.tar.gz</p>
<p>apache-tomcat-7.0.47.tar.gz</p>
<p>zookeeper-3.4.6.tar.gz</p>
<p>solr-4.10.3.tgz</p>
<h2 id="五-安装步骤"><a href="#五-安装步骤" class="headerlink" title="五.安装步骤"></a>五.安装步骤</h2><h3 id="5-1-Zookeeper集群搭建"><a href="#5-1-Zookeeper集群搭建" class="headerlink" title="5.1 Zookeeper集群搭建"></a>5.1 Zookeeper集群搭建</h3><p>第一步：需要安装jdk环境。</p>
<p>第二步：把zookeeper的压缩包上传到服务器。<br><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/3_131875142752812500.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/4_131875142755625000.png" alt="image"></p>
<p>第三步：解压缩。</p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/5_131875142764843750.png" alt="image"></p>
<p>第四步：把zookeeper复制三份。</p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/6_131875142769687500.png" alt="image"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# mkdir /usr/local/solr-cloud</span><br><span class="line">[root@localhost ~]# cp -r zookeeper-3.4.6 /usr/local/solr-cloud/zookeeper01</span><br><span class="line">[root@localhost ~]# cp -r zookeeper-3.4.6 /usr/local/solr-cloud/zookeeper02</span><br><span class="line">[root@localhost ~]# cp -r zookeeper-3.4.6 /usr/local/solr-cloud/zookeeper03</span><br></pre></td></tr></table></figure>
<p>第五步：在每个zookeeper目录下创建一个data目录。</p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/7_131875142773593750.png" alt="image"></p>
<p>第六步：在data目录下创建一个myid文件，文件名就叫做“myid”。内容就是每个实<br>例的id。例如1、2、3</p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/8_131875142777031250.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/9_131875142784375000.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/10_131875142789218750.png" alt="image"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost data]# echo 1 &gt;&gt; myid</span><br><span class="line">[root@localhost data]# ll</span><br><span class="line">total 4</span><br><span class="line">-rw-r--r--. 1 root root 2 Apr  7 18:23 myid</span><br><span class="line">[root@localhost data]# cat myid </span><br><span class="line">1</span><br></pre></td></tr></table></figure>
<p>第七步：修改配置文件。把conf目录下的zoo_sample.cfg文件改名为zoo.cfg</p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/11_131875142795156250.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/12_131875142799531250.png" alt="image"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">server.1=192.168.25.154:2881:3881</span><br><span class="line">server.2=192.168.25.154:2882:3882</span><br><span class="line">server.3=192.168.25.154:2883:3883</span><br></pre></td></tr></table></figure>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/13_131875142802343750.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/14_131875142805468750.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/15_131875142808750000.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/16_131875142812031250.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/17_131875142815781250.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/18_131875142818125000.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/19_131875142824843750.png" alt="image"></p>
<p>第八步：启动每个zookeeper实例。<br>启动bin/zkServer.sh start</p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/20_131875142829375000.png" alt="image"></p>
<p>查看zookeeper的状态：<br>bin/zkServer.sh status</p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/21_131875142832812500.png" alt="image"></p>
<h3 id="5-2-Solr集群的搭建"><a href="#5-2-Solr集群的搭建" class="headerlink" title="5.2 Solr集群的搭建"></a>5.2 Solr集群的搭建</h3><p>第一步：创建四个tomcat实例。每个tomcat运行在不同的端口。8180、8280、8380、8480</p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/1_131875962197656250.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/2_131875962205937500.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/3_131875962208750000.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/4_131875962211562500.png" alt="image"></p>
<p>第二步：部署solr的war包。把单机版的solr工程复制到集群中的tomcat中。</p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/5_131875962215312500.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/6_131875962219062500.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/7_131875962221875000.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/8_131875962225156250.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/9_131875962227812500.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/10_131875962231093750.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/11_131875962233906250.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/12_131875962236718750.png" alt="image"></p>
<p>第三步：为每个solr实例创建一个对应的solrhome。使用单机版的solrhome复制四份。</p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/13_131875962239843750.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/14_131875962242187500.png" alt="image"></p>
<p>第四步：需要修改solr的web.xml文件。把solrhome关联起来。</p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/15_131875962245312500.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/16_131875962248125000.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/17_131875962252187500.png" alt="image"></p>
<p>第五步：配置solrCloud相关的配置。每个solrhome下都有一个solr.xml，把其中的ip及端口号配置好。</p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/18_131875962255156250.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/19_131875962257968750.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/20_131875962261093750.png" alt="image"></p>
<p>第六步：修改tomcat/bin目录下的catalina.sh 文件，关联solr和zookeeper。<br>把此配置添加到配置文件中：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JAVA_OPTS=&quot;-DzkHost=192.168.25.154:2181,192.168.25.154:2182,192.168.25.154:2183&quot;</span><br></pre></td></tr></table></figure>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/21_131875962263437500.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/22_131875962265937500.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/23_131875962268437500.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/24_131875962272812500.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/25_131875962275156250.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/26_131875962278750000.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/27_131875962282656250.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/28_131875962285468750.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/29_131875962288593750.png" alt="image"></p>
<p>第七步：让zookeeper统一管理配置文件。需要把solrhome/collection1/conf目录上传到zookeeper。上传任意solrhome中的配置文件即可。</p>
<p>使用工具上传配置文件：/root/solr-4.10.3/example/scripts/cloud-scripts/zkcli.sh<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./zkcli.sh -zkhost 192.168.25.154:2181,192.168.25.154:2182,192.168.25.154:2183 -cmd upconfig -confdir /usr/local/solr-cloud/solrhome01/collection1/conf -confname myconf</span><br></pre></td></tr></table></figure></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/30_131875962291250000.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/31_131875962294375000.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/32_131875962296875000.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/33_131875962298906250.png" alt="image"></p>
<p>查看zookeeper上的配置文件：</p>
<p>使用zookeeper目录下的bin/zkCli.sh命令查看zookeeper上的配置文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用以下命令连接指定的zookeeper服务：</span><br><span class="line">./zkCli.sh -server 192.168.25.154:2183</span><br></pre></td></tr></table></figure>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/34_131875962303906250.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/35_131875962306562500.png" alt="image"></p>
<p>第八步：启动每个tomcat实例。要包装zookeeper集群是启动状态。</p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/36_131875962308437500.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/37.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/38.png" alt="image"></p>
<p>第九步：访问集群</p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/39.png" alt="image"></p>
<p>第十步：创建新的Collection进行分片处理。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.25.154:8180/solr/admin/collections?action=CREATE&amp;name=collection2&amp;numShards=2&amp;replicationFactor=2</span><br></pre></td></tr></table></figure>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/40.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/41.png" alt="image"></p>
<p>第十一步：删除不用的Collection。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.25.154:8180/solr/admin/collections?action=DELETE&amp;name=collection1</span><br></pre></td></tr></table></figure>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/42.png" alt="image"></p>
<h2 id="六-使用solrJ管理集群"><a href="#六-使用solrJ管理集群" class="headerlink" title="六.使用solrJ管理集群"></a>六.使用solrJ管理集群</h2><h3 id="6-1-添加文档"><a href="#6-1-添加文档" class="headerlink" title="6.1 添加文档"></a>6.1 添加文档</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">使用步骤：</span><br><span class="line">第一步：把solrJ相关的jar包添加到工程中。</span><br><span class="line">第二步：创建一个SolrServer对象，需要使用CloudSolrServer子类。构造方法的参数是zookeeper的地址列表。</span><br><span class="line">第三步：需要设置DefaultCollection属性。</span><br><span class="line">第四步：创建一SolrInputDocument对象。</span><br><span class="line">第五步：向文档对象中添加域</span><br><span class="line">第六步：把文档对象写入索引库。</span><br><span class="line">第七步：提交。</span><br></pre></td></tr></table></figure>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/1_131877006803593750.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/2_131877006807968750.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/3_131877006815312500.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/4_131877006818125000.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/5_131877006822031250.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/6_131877006825156250.png" alt="image"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">    public void testAddDocument() throws Exception&#123;</span><br><span class="line">        //创建一个集群的连接，应该使用CloudSolrServer创建</span><br><span class="line">        //zkHost:zookeeper的地址列表</span><br><span class="line">        CloudSolrServer cloudSolrServer = new CloudSolrServer(&quot;192.168.25.128:2182,192.168.25.128:2183,192.168.25.128:2184&quot;);</span><br><span class="line"></span><br><span class="line">        //设置一个defaultCollection属性</span><br><span class="line">        cloudSolrServer.setDefaultCollection(&quot;collection2&quot;);</span><br><span class="line"></span><br><span class="line">        //创建一个文档对象</span><br><span class="line">        SolrInputDocument document= new SolrInputDocument();</span><br><span class="line"></span><br><span class="line">        //向文档中添加域</span><br><span class="line">        document.setField(&quot;id&quot;,&quot;solrcloud01&quot;);</span><br><span class="line">        document.setField(&quot;item_title&quot;,&quot;测试商品01&quot;);</span><br><span class="line">        document.setField(&quot;item_price&quot;,123);</span><br><span class="line"></span><br><span class="line">        //把文件写入索引库</span><br><span class="line">        cloudSolrServer.add(document);</span><br><span class="line"></span><br><span class="line">        //提交</span><br><span class="line">        cloudSolrServer.commit();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/1_131877136924218750.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/2_131877136933437500.png" alt="image"></p>
<h3 id="6-2查询文档"><a href="#6-2查询文档" class="headerlink" title="6.2查询文档"></a>6.2查询文档</h3><p>创建一个CloudSolrServer对象，其他处理和单机版一致。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">    public void testQueryDocument() throws Exception&#123;</span><br><span class="line">        //创建一个集群的连接，应该使用CloudSolrServer创建</span><br><span class="line">        //zkHost:zookeeper的地址列表</span><br><span class="line">        CloudSolrServer cloudSolrServer = new CloudSolrServer(&quot;192.168.25.128:2182,192.168.25.128:2183,192.168.25.128:2184&quot;);</span><br><span class="line"></span><br><span class="line">        //设置一个defaultCollection属性</span><br><span class="line">        cloudSolrServer.setDefaultCollection(&quot;collection2&quot;);</span><br><span class="line"></span><br><span class="line">        //创建一个查询条件</span><br><span class="line">        SolrQuery solrQuery = new SolrQuery();</span><br><span class="line"></span><br><span class="line">        //设置查询条件</span><br><span class="line">        solrQuery.setQuery(&quot;*:*&quot;);</span><br><span class="line"></span><br><span class="line">        //执行查询</span><br><span class="line">        QueryResponse query = cloudSolrServer.query(solrQuery);</span><br><span class="line"></span><br><span class="line">        //取查询结果</span><br><span class="line">        SolrDocumentList results = query.getResults();</span><br><span class="line">        System.out.println(&quot;总记录数：&quot;+results.getNumFound());</span><br><span class="line"></span><br><span class="line">        //打印</span><br><span class="line">        for(SolrDocument solrDocument:results)&#123;</span><br><span class="line">            System.out.println(solrDocument.get(&quot;id&quot;));</span><br><span class="line">            System.out.println(solrDocument.get(&quot;title&quot;));</span><br><span class="line">            System.out.println(solrDocument.get(&quot;item_title&quot;));</span><br><span class="line">            System.out.println(solrDocument.get(&quot;item_price&quot;));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/3_131877136940000000.png" alt="image"></p>
<h2 id="七-把搜索功能切换到集群版"><a href="#七-把搜索功能切换到集群版" class="headerlink" title="七.把搜索功能切换到集群版"></a>七.把搜索功能切换到集群版</h2><p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/4_131877177777187500.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/5_131877177784375000.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/6_131877177794218750.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/7_131877177803437500.png" alt="image"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">	xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</span><br><span class="line">	xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;</span><br><span class="line">	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">	xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans4.2.xsd</span><br><span class="line">	http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context4.2.xsd</span><br><span class="line">	http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop4.2.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx4.2.xsd</span><br><span class="line">	http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util4.2.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 单机版solr服务配置 --&gt;</span><br><span class="line">	&lt;!-- &lt;bean id=&quot;httpSolrServer&quot; class=&quot;org.apache.solr.client.solrj.impl.HttpSolrServer&quot;&gt;</span><br><span class="line">		&lt;constructor-arg name=&quot;baseURL&quot; value=&quot;http://192.168.25.128:8080/solr&quot;&gt;&lt;/constructor-arg&gt;</span><br><span class="line">	&lt;/bean&gt; --&gt;</span><br><span class="line">	&lt;!-- 集群版solr服务 --&gt;</span><br><span class="line">	&lt;bean id=&quot;cloudSolrServer&quot; class=&quot;org.apache.solr.client.solrj.impl.CloudSolrServer&quot;&gt;</span><br><span class="line">		&lt;constructor-arg name=&quot;zkHost&quot; value=&quot;192.168.25.123:2182,192.168.25.128:2183,192.168.25.128:2184&quot;&gt;&lt;/constructor-arg&gt;	</span><br><span class="line">		&lt;property name=&quot;defaultCollection&quot; value=&quot;collection2&quot;&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>
<h2 id="八-同步索引库分析"><a href="#八-同步索引库分析" class="headerlink" title="八.同步索引库分析"></a>八.同步索引库分析</h2><p>方案一：在e3-manager中，添加商品的业务逻辑中，添加一个同步索引库的业务逻辑。</p>
<blockquote>
<p>就是添加一次商品，就紧接着调用一次索引库的导入</p>
</blockquote>
<p>缺点：业务逻辑耦合度高，业务拆分不明确</p>
<p>方案二：业务逻辑在e3-search中实现，调用服务在e3-manager实现。业务逻辑分开。<br>缺点：服务之间的耦合度变高。服务的启动有先后顺序。</p>
<p>方案三：<font size="3" color="red">使用消息队列</font>。MQ是一个消息中间件。</p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/11_131877862087656250.png" alt="image"></p>
<p>MQ是一个消息中间件，ActiveMQ、RabbitMQ、kafka</p>
<h2 id="九-ActiveMQ"><a href="#九-ActiveMQ" class="headerlink" title="九.ActiveMQ"></a>九.ActiveMQ</h2><h3 id="9-1-什么是ActiveMQ"><a href="#9-1-什么是ActiveMQ" class="headerlink" title="9.1 什么是ActiveMQ"></a>9.1 什么是ActiveMQ</h3><p>ActiveMQ 是Apache出品，最流行的，能力强劲的开源消息总线。ActiveMQ 是一个完全支持JMS1.1和J2EE 1.4规范的 JMS Provider实现,尽管JMS规范出台已经是很久的事情了,但是JMS在当今的J2EE应用中间仍然扮演着特殊的地位。</p>
<blockquote>
<p>JMS:JAVA Message ……,JavaEE改名之前就叫J2EE</p>
</blockquote>
<p>主要特点：</p>
<ol>
<li>多种语言和协议编写客户端。语言: Java, C, C++, C#, Ruby, Perl, Python, PHP。应用协议: OpenWire,Stomp REST,WS Notification,XMPP,AMQP</li>
<li>完全支持JMS1.1和J2EE 1.4规范 (持久化,XA消息,事务)</li>
<li>对Spring的支持,ActiveMQ可以很容易内嵌到使用Spring的系统里面去,而且也支持Spring2.0的特性</li>
<li>通过了常见J2EE服务器(如 Geronimo,JBoss 4, GlassFish,WebLogic)的测试,其中通过JCA 1.5 resource adaptors的配置,可以让ActiveMQ可以自动的部署到任何兼容J2EE 1.4 商业服务器上</li>
<li>支持多种传送协议:in-VM,TCP,SSL,NIO,UDP,JGroups,JXTA</li>
<li>支持通过JDBC和journal提供高速的消息持久化</li>
<li>从设计上保证了高性能的集群,客户端-服务器,点对点</li>
<li>支持Ajax</li>
<li>支持与Axis的整合</li>
<li>可以很容易得调用内嵌JMS provider,进行测试</li>
</ol>
<h3 id="9-2-ActiveMQ的消息形式"><a href="#9-2-ActiveMQ的消息形式" class="headerlink" title="9.2 ActiveMQ的消息形式"></a>9.2 ActiveMQ的消息形式</h3><p>对于消息的传递有两种类型：</p>
<p><font size="3" color="green">一种是点对点的</font>，即一个生产者和一个消费者一一对应；</p>
<p><font size="3" color="green">另一种是发布/订阅模式</font>，即一个生产者产生消息并进行发送后，可以由多个消费者进行接收。</p>
<p>JMS定义了五种不同的消息正文格式，以及调用的消息类型，允许你发送并接收以一些不同形式的数据，提供现有消息格式的一些级别的兼容性。</p>
<ul>
<li>StreamMessage – Java原始值的数据流</li>
<li>MapMessage–一套名称-值对</li>
<li>TextMessage–一个字符串对象</li>
<li>ObjectMessage–一个序列化的 Java对象</li>
<li>BytesMessage–一个字节的数据流</li>
</ul>
<h2 id="十-ActiveMQ的安装"><a href="#十-ActiveMQ的安装" class="headerlink" title="十.ActiveMQ的安装"></a>十.ActiveMQ的安装</h2><p>进入<a href="http://activemq.apache.org/下载ActiveMQ" target="_blank" rel="noopener">http://activemq.apache.org/下载ActiveMQ</a></p>
<p>使用的版本是5.12.0</p>
<h3 id="10-1-安装环境"><a href="#10-1-安装环境" class="headerlink" title="10.1 安装环境:"></a>10.1 安装环境:</h3><ol>
<li>需要jdk</li>
<li>安装Linux系统。生产环境都是Linux系统。</li>
</ol>
<h3 id="10-2-安装步骤"><a href="#10-2-安装步骤" class="headerlink" title="10.2 安装步骤"></a>10.2 安装步骤</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">第一步： 把ActiveMQ 的压缩包上传到Linux系统。</span><br><span class="line">第二步：解压缩。</span><br><span class="line">第三步：启动。</span><br><span class="line">使用bin目录下的activemq命令启动：</span><br><span class="line">[root@localhost bin]# ./activemq start</span><br><span class="line">关闭：</span><br><span class="line">[root@localhost bin]# ./activemq stop</span><br><span class="line">查看状态：</span><br><span class="line">[root@localhost bin]# ./activemq status</span><br><span class="line"></span><br><span class="line">注意：如果ActiveMQ整合spring使用不要使用activemq-all-5.12.0.jar包。建议使用5.11.2</span><br><span class="line"></span><br><span class="line">进入管理后台：</span><br><span class="line">http://192.168.25.168:8161/admin</span><br><span class="line">用户名：admin</span><br><span class="line">密码：admin</span><br></pre></td></tr></table></figure>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/1_131877861982812500.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/2_131877861998750000.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/3_131877862010625000.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/4_131877862022812500.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/5_131877862030625000.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/6_131877862040156250.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/7_131877862051875000.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/8_131877862066718750.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/9_131877862072968750.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/10_131877862078593750.png" alt="image"></p>
<h2 id="十一ActiveMQ的使用方法"><a href="#十一ActiveMQ的使用方法" class="headerlink" title="十一ActiveMQ的使用方法"></a>十一ActiveMQ的使用方法</h2><p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/24_131878004931718750.png" alt="image"></p>
<blockquote>
<p>一种是点对点，一种是广播的方式</p>
</blockquote>
<h3 id="11-1-Queue"><a href="#11-1-Queue" class="headerlink" title="11.1 Queue"></a>11.1 Queue</h3><h4 id="11-1-1-Producer"><a href="#11-1-1-Producer" class="headerlink" title="11.1.1 Producer"></a>11.1.1 Producer</h4><p>生产者：生产消息，发送端。<br>把jar包添加到工程中。使用5.11.2版本的jar包。</p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/12_131878004171250000.png" alt="image"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">第一步：创建ConnectionFactory对象，需要指定服务端ip及端口号。</span><br><span class="line">第二步：使用ConnectionFactory对象创建一个Connection对象。</span><br><span class="line">第三步：开启连接，调用Connection对象的start方法。</span><br><span class="line">第四步：使用Connection对象创建一个Session对象。</span><br><span class="line">第五步：使用Session对象创建一个Destination对象（topic、queue），此处创建一个Queue对象。</span><br><span class="line">第六步：使用Session对象创建一个Producer对象。</span><br><span class="line">第七步：创建一个Message对象，创建一个TextMessage对象。</span><br><span class="line">第八步：使用Producer对象发送消息。</span><br><span class="line">第九步：关闭资源。</span><br></pre></td></tr></table></figure>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/13_131878004175625000.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/14_131878004179843750.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/15_131878004185468750.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/16_131878004188906250.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/17_131878004195781250.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/18_131878004200156250.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/19_131878004207968750.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/20_131878004212343750.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/21_131878004217968750.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/22_131878004224687500.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/23_131878004230625000.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/24_131878004931718750.png" alt="image"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">    * 点到点形式发送</span><br><span class="line">    * @throws Exception</span><br><span class="line">    */</span><br><span class="line">   @Test</span><br><span class="line">   public void testQueueProducer() throws Exception&#123;</span><br><span class="line">       //1.创建一个连接工厂对象，需要指定服务的ip及端口</span><br><span class="line">       ConnectionFactory connectionFactory = new ActiveMQConnectionFactory(&quot;tcp://192.168.25.128:61616&quot;);</span><br><span class="line"></span><br><span class="line">       //2.使用工厂对象创建一个Connection对象</span><br><span class="line">       Connection connection = connectionFactory.createConnection();</span><br><span class="line"></span><br><span class="line">       //3.开启连接，调用Connection对象的start方法。</span><br><span class="line">       connection.start();</span><br><span class="line"></span><br><span class="line">       //4.创建一个Session对象</span><br><span class="line">       //第一个参数：是否开启事务。如果true开启事务，第二个参数将没有意义。一般不开旗事务</span><br><span class="line">       //第二个参数：应答模式。自动应答或者手动应答。一般自动应答。</span><br><span class="line">       Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);</span><br><span class="line"></span><br><span class="line">       //5.使用Session对象创建一个Destination对象。两种形式queue、topic，现在应该使用queue</span><br><span class="line">       Queue queue = session.createQueue(&quot;test-queue&quot;);</span><br><span class="line"></span><br><span class="line">       //6.使用Session对象创建一个Producer对象。</span><br><span class="line">       MessageProducer producer = session.createProducer(queue);</span><br><span class="line"></span><br><span class="line">       //7.创建一个Message对象，可以使用TextMessage</span><br><span class="line">       /*TextMessage textMessage = new ActiveMQTextMessage();</span><br><span class="line">       textMessage.setText(&quot;hello Activemq&quot;);*/</span><br><span class="line"></span><br><span class="line">       TextMessage textMessage = session.createTextMessage(&quot;hello activemq&quot;);</span><br><span class="line"></span><br><span class="line">       //8.发送消息</span><br><span class="line">       producer.send(textMessage);</span><br><span class="line"></span><br><span class="line">       //9.关闭资源</span><br><span class="line">       producer.close();</span><br><span class="line">       session.close();</span><br><span class="line">       connection.close();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h4 id="11-1-2-Consumer"><a href="#11-1-2-Consumer" class="headerlink" title="11.1.2 Consumer"></a>11.1.2 Consumer</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">消费者：接收消息。</span><br><span class="line">第一步：创建一个ConnectionFactory对象。</span><br><span class="line">第二步：从ConnectionFactory对象中获得一个Connection对象。</span><br><span class="line">第三步：开启连接。调用Connection对象的start方法。</span><br><span class="line">第四步：使用Connection对象创建一个Session对象。</span><br><span class="line">第五步：使用Session对象创建一个Destination对象。和发送端保持一致queue，并且队列的名称一致。</span><br><span class="line">第六步：使用Session对象创建一个Consumer对象。</span><br><span class="line">第七步：接收消息。</span><br><span class="line">第八步：打印消息。</span><br><span class="line">第九步：关闭资源</span><br></pre></td></tr></table></figure>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/25_131878023982968750.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/26_131878023986250000.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/27_131878023988906250.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/28_131878023991875000.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/29_131878023994687500.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/30_131878023997031250.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/31_131878023999687500.png" alt="image"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">    public void testQueueConsumer() throws Exception&#123;</span><br><span class="line">        //创建一个ConnectionFactory对象连接MQ服务器</span><br><span class="line">        ConnectionFactory connectionFactory = new ActiveMQConnectionFactory(&quot;tcp://192.168.25.128:61616&quot;);</span><br><span class="line"></span><br><span class="line">        //创建一个连接对象</span><br><span class="line">        Connection connection = connectionFactory.createConnection();</span><br><span class="line"></span><br><span class="line">        //开启连接</span><br><span class="line">        connection.start();</span><br><span class="line"></span><br><span class="line">        //使用Connection对象创建一个Session对象</span><br><span class="line">        Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);</span><br><span class="line"></span><br><span class="line">        //创建一个Destination对象。queue对象</span><br><span class="line">        Queue queue = session.createQueue(&quot;test-queue&quot;);</span><br><span class="line"></span><br><span class="line">        //使用Session对象创建一个消费者对象</span><br><span class="line">        MessageConsumer consumer = session.createConsumer(queue);</span><br><span class="line"></span><br><span class="line">        //接受消息</span><br><span class="line">        consumer.setMessageListener(new MessageListener() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onMessage(Message message) &#123;</span><br><span class="line">                //打印结果</span><br><span class="line">                TextMessage textMessage = (TextMessage) message;</span><br><span class="line">                try &#123;</span><br><span class="line">                    String text = textMessage.getText();</span><br><span class="line">                    System.out.println(text);</span><br><span class="line">                &#125; catch (JMSException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        //等待接受消息</span><br><span class="line">        System.in.read();</span><br><span class="line"></span><br><span class="line">        //关闭资源</span><br><span class="line">        consumer.close();</span><br><span class="line">        session.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="11-2-Topic"><a href="#11-2-Topic" class="headerlink" title="11.2 Topic"></a>11.2 Topic</h3><h4 id="11-2-1-Producer"><a href="#11-2-1-Producer" class="headerlink" title="11.2.1 Producer"></a>11.2.1 Producer</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">使用步骤：</span><br><span class="line">第一步：创建ConnectionFactory对象，需要指定服务端ip及端口号。</span><br><span class="line">第二步：使用ConnectionFactory对象创建一个Connection对象。</span><br><span class="line">第三步：开启连接，调用Connection对象的start方法。</span><br><span class="line">第四步：使用Connection对象创建一个Session对象。</span><br><span class="line">第五步：使用Session对象创建一个Destination对象（topic、queue），此处创建一个Topic对象。</span><br><span class="line">第六步：使用Session对象创建一个Producer对象。</span><br><span class="line">第七步：创建一个Message对象，创建一个TextMessage对象。</span><br><span class="line">第八步：使用Producer对象发送消息。</span><br><span class="line">第九步：关闭资源。</span><br></pre></td></tr></table></figure>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/1_131878467847031250.png" alt="image"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">    public void testTopicProducer() throws Exception&#123;</span><br><span class="line">        //1.创建一个连接工厂对象，需要指定服务的ip及端口</span><br><span class="line">        ConnectionFactory connectionFactory = new ActiveMQConnectionFactory(&quot;tcp://192.168.25.128:61616&quot;);</span><br><span class="line"></span><br><span class="line">        //2.使用工厂对象创建一个Connection对象</span><br><span class="line">        Connection connection = connectionFactory.createConnection();</span><br><span class="line"></span><br><span class="line">        //3.开启连接，调用Connection对象的start方法。</span><br><span class="line">        connection.start();</span><br><span class="line"></span><br><span class="line">        //4.创建一个Session对象</span><br><span class="line">        //第一个参数：是否开启事务。如果true开启事务，第二个参数将没有意义。一般不开旗事务</span><br><span class="line">        //第二个参数：应答模式。自动应答或者手动应答。一般自动应答。</span><br><span class="line">        Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);</span><br><span class="line"></span><br><span class="line">        //5.使用Session对象创建一个Destination对象。两种形式queue、topic，现在应该使用queue</span><br><span class="line">        /*Queue queue = session.createQueue(&quot;test-queue&quot;);*/</span><br><span class="line">        Topic topic = session.createTopic(&quot;test-topic&quot;);</span><br><span class="line"></span><br><span class="line">        //6.使用Session对象创建一个Producer对象。</span><br><span class="line">        /*MessageProducer producer = session.createProducer(queue);*/</span><br><span class="line">        MessageProducer producer = session.createProducer(topic);</span><br><span class="line"></span><br><span class="line">        //7.创建一个Message对象，可以使用TextMessage</span><br><span class="line">        /*TextMessage textMessage = new ActiveMQTextMessage();</span><br><span class="line">        textMessage.setText(&quot;hello Activemq&quot;);*/</span><br><span class="line"></span><br><span class="line">        TextMessage textMessage = session.createTextMessage(&quot;topic message&quot;);</span><br><span class="line"></span><br><span class="line">        //8.发送消息</span><br><span class="line">        producer.send(textMessage);</span><br><span class="line"></span><br><span class="line">        //9.关闭资源</span><br><span class="line">        producer.close();</span><br><span class="line">        session.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/2_131878473855625000.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/3_131878473892343750.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/4_131878473943281250.png" alt="image"></p>
<blockquote>
<p>广播消息，发了之后，就不管了，如果没有人接受，那就直接没了，有人会说，这在队列里啊，这不是队列啊。别理解错了。它只管发送，不管有没有人接，没人接就没了。</p>
</blockquote>
<h4 id="11-2-2-Consumer"><a href="#11-2-2-Consumer" class="headerlink" title="11.2.2 Consumer"></a>11.2.2 Consumer</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">消费者：接收消息。</span><br><span class="line">第一步：创建一个ConnectionFactory对象。</span><br><span class="line">第二步：从ConnectionFactory对象中获得一个Connection对象。</span><br><span class="line">第三步：开启连接。调用Connection对象的start方法。</span><br><span class="line">第四步：使用Connection对象创建一个Session对象。</span><br><span class="line">第五步：使用Session对象创建一个Destination对象。和发送端保持一致topic，并且话题的名称一致。</span><br><span class="line">第六步：使用Session对象创建一个Consumer对象。</span><br><span class="line">第七步：接收消息。</span><br><span class="line">第八步：打印消息。</span><br><span class="line">第九步：关闭资源</span><br></pre></td></tr></table></figure>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/5_131878498220000000.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/6_131878498228281250.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/7_131878498247968750.png" alt="image"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">    public void testTopicConsumer() throws Exception&#123;</span><br><span class="line">        //创建一个ConnectionFactory对象连接MQ服务器</span><br><span class="line">        ConnectionFactory connectionFactory = new ActiveMQConnectionFactory(&quot;tcp://192.168.25.128:61616&quot;);</span><br><span class="line"></span><br><span class="line">        //创建一个连接对象</span><br><span class="line">        Connection connection = connectionFactory.createConnection();</span><br><span class="line"></span><br><span class="line">        //开启连接</span><br><span class="line">        connection.start();</span><br><span class="line"></span><br><span class="line">        //使用Connection对象创建一个Session对象</span><br><span class="line">        Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);</span><br><span class="line"></span><br><span class="line">        //创建一个Destination对象。queue对象</span><br><span class="line">        /*Queue queue = session.createQueue(&quot;test-queue&quot;);*/</span><br><span class="line">        Topic topic = session.createTopic(&quot;test-topic&quot;);</span><br><span class="line"></span><br><span class="line">        //使用Session对象创建一个消费者对象</span><br><span class="line">        MessageConsumer consumer = session.createConsumer(topic);</span><br><span class="line"></span><br><span class="line">        //接受消息</span><br><span class="line">        consumer.setMessageListener(new MessageListener() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onMessage(Message message) &#123;</span><br><span class="line">                //打印结果</span><br><span class="line">                TextMessage textMessage = (TextMessage) message;</span><br><span class="line">                try &#123;</span><br><span class="line">                    String text = textMessage.getText();</span><br><span class="line">                    System.out.println(text);</span><br><span class="line">                &#125; catch (JMSException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;topic消费者1已经启动&quot;);</span><br><span class="line"></span><br><span class="line">        //等待接受消息</span><br><span class="line">        System.in.read();</span><br><span class="line"></span><br><span class="line">        //关闭资源</span><br><span class="line">        consumer.close();</span><br><span class="line">        session.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="十二-全局异常处理"><a href="#十二-全局异常处理" class="headerlink" title="十二.全局异常处理"></a>十二.全局异常处理</h2><p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/21_131878641926406250.png" alt="image"></p>
<h3 id="为什么配置全局异常处理？"><a href="#为什么配置全局异常处理？" class="headerlink" title="为什么配置全局异常处理？"></a>为什么配置全局异常处理？</h3><p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/8_131878641861250000.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/9_131878641867656250.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/10_131878641874062500.png" alt="image"></p>
<h3 id="12-1-处理思路"><a href="#12-1-处理思路" class="headerlink" title="12.1 处理思路"></a>12.1 处理思路</h3><h3 id="12-2-创建全局异常处理器"><a href="#12-2-创建全局异常处理器" class="headerlink" title="12.2 创建全局异常处理器"></a>12.2 创建全局异常处理器</h3><p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/11_131878641880000000.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/12_131878641886406250.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/13_131878641891093750.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/14_131878641895937500.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/15_131878641900937500.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/165.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/17_131878641906093750.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/18_131878641911093750.png" alt="image"></p>
<p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/19_131878641915468750.png" alt="image"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * @author RickYinPeng</span><br><span class="line"> * @ClassName GlobalExceptionResolver</span><br><span class="line"> * @Description 全局异常处理</span><br><span class="line"> * @date 2018/11/28/11:47</span><br><span class="line"> */</span><br><span class="line">public class GlobalExceptionResolver implements HandlerExceptionResolver&#123;</span><br><span class="line"></span><br><span class="line">    private static  Logger logger = LoggerFactory.getLogger(GlobalExceptionResolver.class);</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public ModelAndView resolveException(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, Exception e) &#123;</span><br><span class="line"></span><br><span class="line">        //打印控制台</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        //写日志</span><br><span class="line">        logger.debug(&quot;测试输出的日志.......&quot;);</span><br><span class="line">        logger.info(&quot;系统发生异常了......&quot;);</span><br><span class="line">        logger.error(&quot;系统发生异常&quot;,e);</span><br><span class="line"></span><br><span class="line">        //发邮件、发短信</span><br><span class="line">        //使用jmail工具包。发短信使用第三方的WebService。</span><br><span class="line"></span><br><span class="line">        //显示错误页面</span><br><span class="line">        ModelAndView modelAndView = new ModelAndView();</span><br><span class="line">        modelAndView.setViewName(&quot;error/exception&quot;);</span><br><span class="line"></span><br><span class="line">        return modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="12-3-Springmvc中配置异常处理器"><a href="#12-3-Springmvc中配置异常处理器" class="headerlink" title="12.3 Springmvc中配置异常处理器"></a>12.3 Springmvc中配置异常处理器</h3><p><img src="http://img.027cgb.com/606599/%E5%AE%9C%E7%AB%8B%E6%96%B9%E5%95%86%E5%9F%8E/20_131878641921093750.png" alt="image"></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/宜立方商城项目/" rel="tag"># 宜立方商城项目</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/07/05/5.1.1继承的实现/" rel="next" title="十三.继承的实现">
                <i class="fa fa-chevron-left"></i> 十三.继承的实现
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/07/05/5.宜立方商城——前台工程搭建&内容管理模块/" rel="prev" title="五.宜立方商城——前台工程搭建&内容管理模块">
                五.宜立方商城——前台工程搭建&内容管理模块 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/We.jpg"
                alt="RickYinPeng" />
            
              <p class="site-author-name" itemprop="name">RickYinPeng</p>
              <p class="site-description motion-element" itemprop="description">毕生追求无他，爱与自由而已。</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">112</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">12</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">15</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/RickYinPeng" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-globe"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://weibo.com/u/1041120045?is_hot=1" target="_blank" title="Weibo">
                      
                        <i class="fa fa-fw fa-globe"></i>Weibo</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#一-课程计划"><span class="nav-number">1.</span> <span class="nav-text">一.课程计划</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#二-什么是SolrCloud？"><span class="nav-number">2.</span> <span class="nav-text">二.什么是SolrCloud？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#三-Solr集群的系统架构"><span class="nav-number">3.</span> <span class="nav-text">三.Solr集群的系统架构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1物理结构"><span class="nav-number">3.1.</span> <span class="nav-text">3.1物理结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2逻辑结构"><span class="nav-number">3.2.</span> <span class="nav-text">3.2逻辑结构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-1-collection"><span class="nav-number">3.2.1.</span> <span class="nav-text">3.2.1 collection</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-2-Core"><span class="nav-number">3.2.2.</span> <span class="nav-text">3.2.2 Core</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-3-Master或Slave"><span class="nav-number">3.2.3.</span> <span class="nav-text">3.2.3 Master或Slave</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-4-Shard"><span class="nav-number">3.2.4.</span> <span class="nav-text">3.2.4 Shard</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-需要实现的solr集群架构"><span class="nav-number">3.3.</span> <span class="nav-text">3.3 需要实现的solr集群架构</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#四-环境准备"><span class="nav-number">4.</span> <span class="nav-text">四.环境准备</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#五-安装步骤"><span class="nav-number">5.</span> <span class="nav-text">五.安装步骤</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-Zookeeper集群搭建"><span class="nav-number">5.1.</span> <span class="nav-text">5.1 Zookeeper集群搭建</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-Solr集群的搭建"><span class="nav-number">5.2.</span> <span class="nav-text">5.2 Solr集群的搭建</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#六-使用solrJ管理集群"><span class="nav-number">6.</span> <span class="nav-text">六.使用solrJ管理集群</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-添加文档"><span class="nav-number">6.1.</span> <span class="nav-text">6.1 添加文档</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2查询文档"><span class="nav-number">6.2.</span> <span class="nav-text">6.2查询文档</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#七-把搜索功能切换到集群版"><span class="nav-number">7.</span> <span class="nav-text">七.把搜索功能切换到集群版</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#八-同步索引库分析"><span class="nav-number">8.</span> <span class="nav-text">八.同步索引库分析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#九-ActiveMQ"><span class="nav-number">9.</span> <span class="nav-text">九.ActiveMQ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#9-1-什么是ActiveMQ"><span class="nav-number">9.1.</span> <span class="nav-text">9.1 什么是ActiveMQ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-2-ActiveMQ的消息形式"><span class="nav-number">9.2.</span> <span class="nav-text">9.2 ActiveMQ的消息形式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#十-ActiveMQ的安装"><span class="nav-number">10.</span> <span class="nav-text">十.ActiveMQ的安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#10-1-安装环境"><span class="nav-number">10.1.</span> <span class="nav-text">10.1 安装环境:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-2-安装步骤"><span class="nav-number">10.2.</span> <span class="nav-text">10.2 安装步骤</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#十一ActiveMQ的使用方法"><span class="nav-number">11.</span> <span class="nav-text">十一ActiveMQ的使用方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#11-1-Queue"><span class="nav-number">11.1.</span> <span class="nav-text">11.1 Queue</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#11-1-1-Producer"><span class="nav-number">11.1.1.</span> <span class="nav-text">11.1.1 Producer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#11-1-2-Consumer"><span class="nav-number">11.1.2.</span> <span class="nav-text">11.1.2 Consumer</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-2-Topic"><span class="nav-number">11.2.</span> <span class="nav-text">11.2 Topic</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#11-2-1-Producer"><span class="nav-number">11.2.1.</span> <span class="nav-text">11.2.1 Producer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#11-2-2-Consumer"><span class="nav-number">11.2.2.</span> <span class="nav-text">11.2.2 Consumer</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#十二-全局异常处理"><span class="nav-number">12.</span> <span class="nav-text">十二.全局异常处理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#为什么配置全局异常处理？"><span class="nav-number">12.1.</span> <span class="nav-text">为什么配置全局异常处理？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-1-处理思路"><span class="nav-number">12.2.</span> <span class="nav-text">12.1 处理思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-2-创建全局异常处理器"><span class="nav-number">12.3.</span> <span class="nav-text">12.2 创建全局异常处理器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-3-Springmvc中配置异常处理器"><span class="nav-number">12.4.</span> <span class="nav-text">12.3 Springmvc中配置异常处理器</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        ﻿<div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">RickYinPeng</span>

  
</div>
<div class="powered-by">
<i class="fa fa-user-md"></i>
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <span id="busuanzi_container_site_pv">总访问量：<span id="busuanzi_value_site_pv"></span>次</span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_uv">总访客：<span id="busuanzi_value_site_uv"></span>人</span>
    <span class="post-meta-divider">|</span>




  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
